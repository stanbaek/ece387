

<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>üî¨ Lab5: Driving the Robot &#8212; Introduction to Robotic Systems</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/tabs.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script src="../_static/tabs.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'Labs/Lab5_TurtleBot';</script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="üî¨ Lab6: IMU" href="Lab6_IMU.html" />
    <link rel="prev" title="üî¨ Lab4: Gamepad" href="Lab4_Gamepad.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="../intro.html">
  
  
  
  
    
    
      
    
    
    <img src="../_static/ece387.png" class="logo__image only-light" alt="Logo image"/>
    <script>document.write(`<img src="../_static/ece387.png" class="logo__image only-dark" alt="Logo image"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../intro.html">
                    ECE 387 Introduction to Robotic Systems
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Course Info</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../syllabus.html">üìå Syllabus</a></li>
<li class="toctree-l1"><a class="reference internal" href="../schedule.html">üìÜ Course Schedule</a></li>
<li class="toctree-l1"><a class="reference internal" href="../PythonBasic.html">üêç Python Basic</a></li>
<li class="toctree-l1"><a class="reference internal" href="../PythonIntermediate.html">üêç Python Intermediate</a></li>
<li class="toctree-l1"><a class="reference internal" href="../NumPy.html">‚ûï NumPy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">üôã FAQ</a></li>
<li class="toctree-l1"><a class="reference external" href="https://stanbaek.github.io/NoPointer.html">No Pointers in Python?</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Labs</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="Lab1_Linux.html">üî¨ Lab1: Linux</a></li>
<li class="toctree-l1"><a class="reference internal" href="Lab2_ROS.html">üî¨ Lab2: ROS</a></li>
<li class="toctree-l1"><a class="reference internal" href="Lab3_Python.html">üî¨ Lab3: Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="Lab4_Gamepad.html">üî¨ Lab4: Gamepad</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">üî¨ Lab5: Driving the Robot</a></li>
<li class="toctree-l1"><a class="reference internal" href="Lab6_IMU.html">üî¨ Lab6: IMU</a></li>
<li class="toctree-l1"><a class="reference internal" href="Lab7_LaunchFile.html">üî¨ Lab7: Launch Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="Lab8_LIDAR.html">üî¨ Lab8: LIDAR</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Appendix</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../Appendix/RobotSetup.html">üîß Robot Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Appendix/MasterSetup.html">üîß Master Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Appendix/GitSetup.html">üîß Git Repo Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Appendix/GamepadSetup.html">üîß Gamepad Setup</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/stanbaek/ece387" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/stanbaek/ece387/issues/new?title=Issue%20on%20page%20%2FLabs/Lab5_TurtleBot.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/Labs/Lab5_TurtleBot.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>üî¨ Lab5: Driving the Robot</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#objectives">üìå Objectives</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#lesson-objectives">Lesson Objectives:</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#agenda">Agenda:</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#overview">üìú Overview</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#lab-procedure">üíª Lab Procedure</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#working-with-a-remote-machine">Working with a Remote Machine</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#updating-the-hosts-file-on-master">Updating the Hosts File on Master</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#setting-up-password-free-ssh-using-rsa-keys">Setting Up Password-Free SSH Using RSA Keys</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#driving-the-robot">Driving the Robot</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ros">ROS</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#checkpoint">Checkpoint</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#summary">Summary</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="lab5-driving-the-robot">
<h1>üî¨ Lab5: Driving the Robot<a class="headerlink" href="#lab5-driving-the-robot" title="Permalink to this heading">#</a></h1>
<section id="objectives">
<h2>üìå Objectives<a class="headerlink" href="#objectives" title="Permalink to this heading">#</a></h2>
<ul class="simple">
<li><p>Students should be able to</p></li>
</ul>
</section>
<section id="lesson-objectives">
<h2>Lesson Objectives:<a class="headerlink" href="#lesson-objectives" title="Permalink to this heading">#</a></h2>
<ol class="arabic simple">
<li><p>Gain additional familiarity with simulation environment</p></li>
<li><p>Gain familiarity with Turtlebot 3 robotics platform</p></li>
<li><p>Practice with ROS diagnostic tools</p></li>
</ol>
</section>
<section id="agenda">
<h2>Agenda:<a class="headerlink" href="#agenda" title="Permalink to this heading">#</a></h2>
<ol class="arabic simple">
<li><p>Use Linux terminals to launch and control Turtlebot 3 in simulation environment.</p></li>
<li><p>Use Linux terminals to launch and control actual Turtlebot 3.</p></li>
</ol>
</section>
<section id="overview">
<h2>üìú Overview<a class="headerlink" href="#overview" title="Permalink to this heading">#</a></h2>
<p>This lab will introduce you to utilizing pre-built ROS packages to accomplish a task. It will also provide you experience interacting with someone else‚Äôs source code (.py files) to learn how that component works. You will use ROS to run two nodes, <strong>turtlebot3_core</strong> and <strong>teleop_twist_keyboard</strong>, to drive the Turtlebot3 with a keyboard. You will continue to practice using ROS tools to observe how these components communicate.</p>
</section>
<section id="lab-procedure">
<h2>üíª Lab Procedure<a class="headerlink" href="#lab-procedure" title="Permalink to this heading">#</a></h2>
<section id="working-with-a-remote-machine">
<h3>Working with a Remote Machine<a class="headerlink" href="#working-with-a-remote-machine" title="Permalink to this heading">#</a></h3>
<p>In this course, you‚Äôll drive your TurtleBot without the need for a monitor and keyboard. However, you‚Äôll still need access to the Raspberry Pi on the robot to run ROS nodes. One of the easiest ways to remotely access a Linux machine is through a secure shell (SSH). To create an SSH connection, you‚Äôll need the username and hostname (or IP address) of the computer you want to access. For the Raspberry Pis, the username is <code class="docutils literal notranslate"><span class="pre">pi</span></code> and the hostname is your robot number (e.g., <code class="docutils literal notranslate"><span class="pre">robot98</span></code>).</p>
<ol class="arabic" id="accesspoint">
<li><p><strong>Connect to the Robot‚Äôs Wi-Fi Network</strong>:</p>
<ul class="simple">
<li><p>Click the system menu in the top-right corner to open the Wi-Fi Networks setting.</p></li>
<li><p>Choose <code class="docutils literal notranslate"><span class="pre">RobotXX</span></code>, where <code class="docutils literal notranslate"><span class="pre">XX</span></code> corresponds to the <code class="docutils literal notranslate"><span class="pre">XX</span></code> in <code class="docutils literal notranslate"><span class="pre">MasterXX</span></code>.</p></li>
</ul>
<a class="reference internal image-reference" href="../_images/Lab5_ConnectToRobotWiFi.png"><img alt="../_images/Lab5_ConnectToRobotWiFi.png" class="align-center" src="../_images/Lab5_ConnectToRobotWiFi.png" style="width: 420px;" /></a>
 <br>
</li>
<li><p><strong>Check Connectivity</strong>:</p>
<ul>
<li><p>The Raspberry Pi on your robot acts as a Wi-Fi access point (AP), allowing communication with your master computer.</p></li>
<li><p>Open a terminal on your master computer.</p></li>
<li><p>Check connectivity to the robot using its IP address, <code class="docutils literal notranslate"><span class="pre">192.168.4.1</span></code>:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>ping<span class="w"> </span><span class="m">192</span>.168.4.1
</pre></div>
</div>
</li>
</ul>
</li>
<li><p><strong>Create a Secure Shell Connection</strong>: To access the robot remotely, create an SSH connection:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>ssh<span class="w"> </span>pi@192.168.4.1
</pre></div>
</div>
<blockquote>
<div><p>‚å®Ô∏è <strong>Syntax:</strong> <code class="docutils literal notranslate"><span class="pre">ssh</span> <span class="pre">&lt;username&gt;&#64;&lt;hostname/IP</span> <span class="pre">address&gt;</span></code></p>
</div></blockquote>
</li>
<li><p><strong>Enter the Robot‚Äôs Password</strong>: After entering the robot‚Äôs password, the terminal should display the <code class="docutils literal notranslate"><span class="pre">pi</span></code> username and your robot‚Äôs hostname, <code class="docutils literal notranslate"><span class="pre">robotX</span></code>. Any commands you run in this shell will execute on the robot.</p></li>
<li><p><strong>Change Your Password</strong>:</p>
<ul>
<li><p>Once logged in, type the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>passwd
</pre></div>
</div>
</li>
<li><p>You will be prompted to enter your <strong>current password</strong>. Type it and press <strong>Enter</strong>.</p></li>
<li><p>Next, you will be asked to enter a <strong>new password</strong>. Type a password and press <strong>Enter</strong>.</p></li>
<li><p>Retype the <strong>new password</strong> to confirm and press <strong>Enter</strong>.  If successful, you will see the message:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">password</span> <span class="n">updated</span> <span class="n">successfully</span>
</pre></div>
</div>
</li>
<li><p>To ensure that your new password works, you can open a new terminal and try logging in again:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>ssh<span class="w"> </span>pi@192.168.4.1
</pre></div>
</div>
<p>Enter the <strong>new password</strong> when prompted.</p>
</li>
</ul>
</li>
<li><p><strong>Edit the <code class="docutils literal notranslate"><span class="pre">.bashrc</span></code> File</strong>:</p>
<ul>
<li><p>Open the <code class="docutils literal notranslate"><span class="pre">.bashrc</span></code> file by running the following command:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>nano<span class="w"> </span>~/.bashrc
</pre></div>
</div>
</li>
<li><p>You should see the following lines at the bottom of the <code class="docutils literal notranslate"><span class="pre">.bashrc</span></code> file:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">source</span><span class="w"> </span>/opt/ros/humble/setup.bash
<span class="nb">source</span><span class="w"> </span>~/robot_ws/install/setup.bash
<span class="nb">source</span><span class="w"> </span>/usr/share/colcon_cd/function/colcon_cd.sh
<span class="nb">export</span><span class="w"> </span><span class="nv">ROS_DOMAIN_ID</span><span class="o">=</span><span class="m">0</span><span class="w">  </span><span class="c1"># For master0 and robot0</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">_colcon_cd_root</span><span class="o">=</span>/opt/ros/humble/
<span class="nb">export</span><span class="w"> </span><span class="nv">TURTLEBOT3_MODEL</span><span class="o">=</span>burger
<span class="nb">export</span><span class="w"> </span><span class="nv">LDS_MODEL</span><span class="o">=</span>LDS-01<span class="w">  </span><span class="c1"># Replace with LDS-02 if using new LIDAR</span>
<span class="nb">source</span><span class="w"> </span>/usr/share/colcon_argcomplete/hook/colcon-argcomplete.bash
</pre></div>
</div>
</li>
<li><p>Your <code class="docutils literal notranslate"><span class="pre">ROS_DOMAIN_ID=XX</span></code> should match your computer ID, where <code class="docutils literal notranslate"><span class="pre">XX</span></code> corresponds to the <code class="docutils literal notranslate"><span class="pre">XX</span></code> in <code class="docutils literal notranslate"><span class="pre">MasterXX</span></code>.</p></li>
<li><p>The robots for our class have two different LIDAR variants: LDS-01 and LDS-02 (pictured below).</p>
<a class="reference internal image-reference" href="../_images/Lab5_LDS.png"><img alt="../_images/Lab5_LDS.png" class="align-center" src="../_images/Lab5_LDS.png" style="width: 480px;" /></a>
  <br>
</li>
<li><p>If you have the LDS-02, update <code class="docutils literal notranslate"><span class="pre">export</span> <span class="pre">LDS_MODEL=LDS-01</span></code> to <code class="docutils literal notranslate"><span class="pre">export</span> <span class="pre">LDS_MODEL=LDS-02</span></code> inside the <code class="docutils literal notranslate"><span class="pre">.bashrc</span></code> file.</p></li>
<li><p>Save the changes and exit the editor.</p></li>
</ul>
</li>
<li><p><strong>Close the SSH Connection</strong>: You can type <code class="docutils literal notranslate"><span class="pre">exit</span></code> to close the SSH connection.</p></li>
</ol>
</section>
<section id="updating-the-hosts-file-on-master">
<h3>Updating the Hosts File on Master<a class="headerlink" href="#updating-the-hosts-file-on-master" title="Permalink to this heading">#</a></h3>
<p>As it is much easier to remember and use the host name than the IP address, let‚Äôs modify the <code class="docutils literal notranslate"><span class="pre">hosts</span></code> file so that the master computer recognizes the host name of the Raspberry Pi.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Ensure that you execute the commands in this section on the <strong>Master</strong> computer. Do not execute them on the Raspberry Pi.</p>
</div>
<ol class="arabic">
<li><p><strong>Update the Hosts File on Master</strong>: To add the robot‚Äôs IP address to the hosts file, follow these steps on the <strong><code class="docutils literal notranslate"><span class="pre">Master</span></code></strong> computer:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>sudo<span class="w"> </span>gedit<span class="w"> </span>/etc/hosts
</pre></div>
</div>
<p>Add the following line to the file:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="m">192</span>.168.4.1<span class="w">    </span>robotXX
</pre></div>
</div>
<p>Replace <code class="docutils literal notranslate"><span class="pre">robotXX</span></code> with your specific robot number.</p>
</li>
<li><p><strong>Save and Close the Hosts File</strong>: Save the changes and close the file by pressing <code class="docutils literal notranslate"><span class="pre">Ctrl+X</span></code>, then <code class="docutils literal notranslate"><span class="pre">Y</span></code> to confirm, and <code class="docutils literal notranslate"><span class="pre">Enter</span></code> to exit.</p></li>
<li><p><strong>Check Connectivity</strong>: Check connectivity to the robot using its host name, <code class="docutils literal notranslate"><span class="pre">robotXX</span></code>:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>ping<span class="w"> </span>robotXX
</pre></div>
</div>
</li>
<li><p><strong>Create a Secure Shell Connection</strong>: To access the robot remotely, create an SSH connection:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>ssh<span class="w"> </span>pi@robotXX
</pre></div>
</div>
<blockquote>
<div><p>‚å®Ô∏è <strong>Syntax:</strong> <code class="docutils literal notranslate"><span class="pre">ssh</span> <span class="pre">&lt;username&gt;&#64;&lt;hostname&gt;</span></code></p>
</div></blockquote>
</li>
<li><p><strong>Enter the Robot‚Äôs Password</strong>: After entering the robot‚Äôs password, the terminal should display the <code class="docutils literal notranslate"><span class="pre">pi</span></code> username and your robot‚Äôs hostname, <code class="docutils literal notranslate"><span class="pre">robotXX</span></code>.</p></li>
</ol>
</section>
<section id="setting-up-password-free-ssh-using-rsa-keys">
<h3>Setting Up Password-Free SSH Using RSA Keys<a class="headerlink" href="#setting-up-password-free-ssh-using-rsa-keys" title="Permalink to this heading">#</a></h3>
<p>Using password-free SSH authentication improves both security and convenience. Instead of manually entering a password each time, SSH keys provide a more secure and automated way to log in. This also makes remote access faster and more efficient.</p>
<ol class="arabic">
<li><p><strong>Generate an SSH Key Pair on the Client</strong>: Open a terminal on the client machine and run the following command to generate an RSA key pair:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>ssh-keygen<span class="w"> </span>-t<span class="w"> </span>rsa<span class="w"> </span>-b<span class="w"> </span><span class="m">4096</span>
</pre></div>
</div>
<p>When prompted to enter a file to save the key, press <strong>Enter</strong> to accept the default location (<code class="docutils literal notranslate"><span class="pre">~/.ssh/id_rsa</span></code>).  If prompted for a passphrase, leave it <strong>empty</strong> (just press Enter) to enable password-free login.</p>
</li>
<li><p><strong>Copy the Public Key to the Remote Server</strong>: You need to transfer your public key to the server. Run the following command, replacing <code class="docutils literal notranslate"><span class="pre">username</span></code> and <code class="docutils literal notranslate"><span class="pre">hostname</span></code> with your actual credentials:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>ssh-copy-id<span class="w"> </span>username@hostname
</pre></div>
</div>
<p>If prompted, enter your password for the remote machine. After this, the key will be added to the server‚Äôs authorized keys.</p>
</li>
<li><p><strong>Test the Connection</strong>: Now, try logging into the remote machine without a password:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>ssh<span class="w"> </span>username@hostname
</pre></div>
</div>
<p>If everything is set up correctly, you should log in without being prompted for a password.</p>
</li>
</ol>
</section>
<section id="driving-the-robot">
<h3>Driving the Robot<a class="headerlink" href="#driving-the-robot" title="Permalink to this heading">#</a></h3>
<ol class="arabic">
<li><p>Using the secure shell, run the <strong>turtlebot3_core.launch</strong> file on the robot.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Take advantage of tab completion! Start typing a package name or node, then press <strong>Tab</strong> to auto-complete the command.</p>
</div>
<p><strong>Note:</strong> The following command contains a deliberate typo to prevent copying and pasting. Be sure to type it out manually or use <strong>Tab</strong> for auto-completion.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>ros2<span class="w"> </span>launch<span class="w"> </span>turt1ebot3_bringup<span class="w"> </span>robot.launch
</pre></div>
</div>
<blockquote>
<div><p>‚å®Ô∏è <strong>Syntax:</strong> <code class="docutils literal notranslate"><span class="pre">ros2</span> <span class="pre">launch</span> <span class="pre">&lt;package&gt;</span> <span class="pre">&lt;launchfile&gt;</span></code></p>
</div></blockquote>
<p>It will print something similar to:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>turtlebot3_ros-3<span class="o">]</span><span class="w"> </span><span class="o">[</span>INFO<span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="m">1738299487</span>.825470539<span class="o">]</span><span class="w"> </span><span class="o">[</span>turtlebot3_node<span class="o">]</span>:<span class="w"> </span>Succeeded<span class="w"> </span>to<span class="w"> </span>create<span class="w"> </span>battery<span class="w"> </span>state<span class="w"> </span>publisher
<span class="o">[</span>turtlebot3_ros-3<span class="o">]</span><span class="w"> </span><span class="o">[</span>INFO<span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="m">1738299487</span>.829476168<span class="o">]</span><span class="w"> </span><span class="o">[</span>turtlebot3_node<span class="o">]</span>:<span class="w"> </span>Succeeded<span class="w"> </span>to<span class="w"> </span>create<span class="w"> </span>imu<span class="w"> </span>publisher
<span class="o">[</span>turtlebot3_ros-3<span class="o">]</span><span class="w"> </span><span class="o">[</span>INFO<span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="m">1738299487</span>.841928335<span class="o">]</span><span class="w"> </span><span class="o">[</span>turtlebot3_node<span class="o">]</span>:<span class="w"> </span>Succeeded<span class="w"> </span>to<span class="w"> </span>create<span class="w"> </span>sensor<span class="w"> </span>state<span class="w"> </span>publisher
<span class="o">[</span>turtlebot3_ros-3<span class="o">]</span><span class="w"> </span><span class="o">[</span>INFO<span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="m">1738299487</span>.844016446<span class="o">]</span><span class="w"> </span><span class="o">[</span>turtlebot3_node<span class="o">]</span>:<span class="w"> </span>Succeeded<span class="w"> </span>to<span class="w"> </span>create<span class="w"> </span>joint<span class="w"> </span>state<span class="w"> </span>publisher
<span class="o">[</span>turtlebot3_ros-3<span class="o">]</span><span class="w"> </span><span class="o">[</span>INFO<span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="m">1738299487</span>.844149094<span class="o">]</span><span class="w"> </span><span class="o">[</span>turtlebot3_node<span class="o">]</span>:<span class="w"> </span>Add<span class="w"> </span>Devices
<span class="o">[</span>turtlebot3_ros-3<span class="o">]</span><span class="w"> </span><span class="o">[</span>INFO<span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="m">1738299487</span>.844204353<span class="o">]</span><span class="w"> </span><span class="o">[</span>turtlebot3_node<span class="o">]</span>:<span class="w"> </span>Succeeded<span class="w"> </span>to<span class="w"> </span>create<span class="w"> </span>motor<span class="w"> </span>power<span class="w"> </span>server
<span class="o">[</span>turtlebot3_ros-3<span class="o">]</span><span class="w"> </span><span class="o">[</span>INFO<span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="m">1738299487</span>.849349150<span class="o">]</span><span class="w"> </span><span class="o">[</span>turtlebot3_node<span class="o">]</span>:<span class="w"> </span>Succeeded<span class="w"> </span>to<span class="w"> </span>create<span class="w"> </span>reset<span class="w"> </span>server
<span class="o">[</span>turtlebot3_ros-3<span class="o">]</span><span class="w"> </span><span class="o">[</span>INFO<span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="m">1738299487</span>.851512798<span class="o">]</span><span class="w"> </span><span class="o">[</span>turtlebot3_node<span class="o">]</span>:<span class="w"> </span>Succeeded<span class="w"> </span>to<span class="w"> </span>create<span class="w"> </span>sound<span class="w"> </span>server
<span class="o">[</span>turtlebot3_ros-3<span class="o">]</span><span class="w"> </span><span class="o">[</span>INFO<span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="m">1738299487</span>.853739761<span class="o">]</span><span class="w"> </span><span class="o">[</span>turtlebot3_node<span class="o">]</span>:<span class="w"> </span>Run!
<span class="o">[</span>turtlebot3_ros-3<span class="o">]</span><span class="w"> </span><span class="o">[</span>INFO<span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="m">1738299487</span>.890749557<span class="o">]</span><span class="w"> </span><span class="o">[</span>diff_drive_controller<span class="o">]</span>:<span class="w"> </span>Init<span class="w"> </span>Odometry
<span class="o">[</span>turtlebot3_ros-3<span class="o">]</span><span class="w"> </span><span class="o">[</span>INFO<span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="m">1738299487</span>.909780816<span class="o">]</span><span class="w"> </span><span class="o">[</span>diff_drive_controller<span class="o">]</span>:<span class="w"> </span>Run!
</pre></div>
</div>
<p>We will learn more about launch files in a few modules, but just understand that a launch file is used to launch one or more ROS nodes.</p>
<p>Your Turtlebot3 is now ready to drive and should be listening for <em>Twist</em> messages to be sent over the <strong>/cmd_vel</strong> topic.</p>
</li>
<li><p>It is always a good idea to check that the Turtlebot3 is communicating with the Master. To do this, we can list the active topics the Turtlebot3 is publishing. Run the following within your <strong>Master</strong>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>ros2<span class="w"> </span>topic<span class="w"> </span>1ist
</pre></div>
</div>
<p>If all is well, it should display something similar to</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>/battery_state
/cmd_vel
/imu
/joint_states
/magnetic_field
/odom<span class="w">   </span>
/tf_static
</pre></div>
</div>
</li>
<li><p>Open a new terminal on the Master and observe the nodes currently running:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>rqt_graph<span class="sb">`</span>
</pre></div>
</div>
<p>You should see <code class="docutils literal notranslate"><span class="pre">/turtlebot3_node</span></code> subscribing to the <code class="docutils literal notranslate"><span class="pre">\cmd_vel</span></code> topic and publishing multiple topics including <code class="docutils literal notranslate"><span class="pre">\imu</span></code>.</p>
</li>
<li><p>Open a new terminal and run</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>ros2<span class="w"> </span>node<span class="w"> </span>info<span class="w"> </span>/turtlebot3_node
</pre></div>
</div>
<p>You should be able to find the topics <code class="docutils literal notranslate"><span class="pre">/turtlebot3_node</span></code> is publishing and subscribing to.</p>
</li>
<li><p>We used the <strong>/cmd_vel</strong> topic when driving the simulated Turtlebot3, but let‚Äôs refresh our memory about the topic:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>ros2<span class="w"> </span>topic<span class="w"> </span>info<span class="w"> </span>/cmd_vel
</pre></div>
</div>
<p>We can find that topic utilizes the <em>Twist</em> message type. We can also verify this by</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>ros2<span class="w"> </span>topic<span class="w"> </span><span class="nb">type</span><span class="w"> </span>/cmd_vel
</pre></div>
</div>
<p>The following will show information about the fields within the <em>Twist</em> message sent over the <strong>/cmd_vel</strong> topic:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>ros2<span class="w"> </span>interface<span class="w"> </span>show<span class="w"> </span>geometry_msg/msg/Twist
</pre></div>
</div>
</li>
<li><p>Run the <strong>teleop_keyboard</strong> node on the Master:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>ros2<span class="w"> </span>run<span class="w"> </span>turtlebot3_teleop<span class="w"> </span>te1eop_keyboard
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>If you run <code class="docutils literal notranslate"><span class="pre">ros2</span> <span class="pre">run</span> <span class="pre">teleop_twist_keyboard</span> <span class="pre">teleop_twist_keyboard</span></code>, the minimum linear x speed of the <code class="docutils literal notranslate"><span class="pre">cmd_vel</span></code> published by the <code class="docutils literal notranslate"><span class="pre">teleop_twist_keyboard</span></code> node is 0.5 m/s which is greater than the maximum speed of TurtleBot3 and so TurtleBot2 will ignore the topic.</p>
</div>
</li>
<li><p>Before we get too excited and drive the Turtlebot3 off a cliff, observe how the nodes communicate using the <strong>rqt_graph</strong> tool in a new terminal (if you still have the previous rqt_graph running, you can hit the refresh button in the top left corner).</p></li>
<li><p>The Turtlebot3 operates best with a linear velocity between 0.1 m/s and 0.2 m/s. It turns best with an angular velocity between 0.5 rad/s and 1.5 rad/s. Drive the TurtleBot3 using these parameters.</p></li>
</ol>
</section>
</section>
<section id="ros">
<h2>ROS<a class="headerlink" href="#ros" title="Permalink to this heading">#</a></h2>
<p>In labs throughout this course we will request information about the topics, nodes, and messages within your system. Accomplish the following in a new terminal on your Master.</p>
<ol class="arabic simple">
<li><p>List all running nodes.</p></li>
<li><p>Display running nodes and communication between them.</p></li>
<li><p>List the active topics.</p></li>
<li><p>Determine the type of messages sent over the topics (repeat for each topic).</p></li>
<li><p>Determine the fields of the messages.</p></li>
<li><p>Observe the information sent over a topic (repeat for each topic).</p></li>
</ol>
</section>
<section id="checkpoint">
<h2>Checkpoint<a class="headerlink" href="#checkpoint" title="Permalink to this heading">#</a></h2>
<p>Once complete, push screenshots showing the output of each of the above to your student repo on github in a /master/module04 folder.</p>
</section>
<section id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Permalink to this heading">#</a></h2>
<p>In this exercise you examined and used pre-built packages and source code to drive the Turtlebot3 and understand how the system worked. You then were able to analyze the topics, nodes, and messages within the ROS system to better understand the flow of information and control. The <strong>pro-tips</strong> presented throughout this exercise will make you a better user of Linux and ROS.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>I strongly recommend that you commit the above sequence of commands to memory, or at a minimum
have them in a place that you can quickly recall them. There is nothing until Module 9 that absolutely requires the real robot, as everything else can be simulated.</p>
</div>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./Labs"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="Lab4_Gamepad.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">üî¨ Lab4: Gamepad</p>
      </div>
    </a>
    <a class="right-next"
       href="Lab6_IMU.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">üî¨ Lab6: IMU</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#objectives">üìå Objectives</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#lesson-objectives">Lesson Objectives:</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#agenda">Agenda:</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#overview">üìú Overview</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#lab-procedure">üíª Lab Procedure</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#working-with-a-remote-machine">Working with a Remote Machine</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#updating-the-hosts-file-on-master">Updating the Hosts File on Master</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#setting-up-password-free-ssh-using-rsa-keys">Setting Up Password-Free SSH Using RSA Keys</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#driving-the-robot">Driving the Robot</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ros">ROS</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#checkpoint">Checkpoint</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#summary">Summary</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Stan Baek
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      ¬© Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>