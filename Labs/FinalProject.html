
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>ğŸš€ Final Project &#8212; Introduction to Robotic Systems</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=a3416100" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css?v=be8a1c11" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../_static/tabs.css?v=4c969af8" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- So that users can add custom icons -->
  <script src="../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script src="../_static/tabs.js?v=3ee01567"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js?v=36754332"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'Labs/FinalProject';</script>
    <link rel="icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="ğŸ”§ Robot Setup" href="../Appendix/RobotSetup.html" />
    <link rel="prev" title="ğŸ”¬ Lab11: AprilTag" href="Lab11_AprilTag.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/ece387.png" class="logo__image only-light" alt="Introduction to Robotic Systems - Home"/>
    <img src="../_static/ece387.png" class="logo__image only-dark pst-js-only" alt="Introduction to Robotic Systems - Home"/>
  
  
</a></div>
        <div class="sidebar-primary-item">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../intro.html">
                    ECE 387 Introduction to Robotic Systems
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Course Info</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../syllabus.html">ğŸ“Œ Syllabus</a></li>
<li class="toctree-l1"><a class="reference internal" href="../schedule.html">ğŸ“† Course Schedule</a></li>
<li class="toctree-l1"><a class="reference internal" href="../PythonBasic.html">ğŸ Python Basic</a></li>
<li class="toctree-l1"><a class="reference internal" href="../PythonIntermediate.html">ğŸ Python Intermediate</a></li>
<li class="toctree-l1"><a class="reference internal" href="../NumPy.html">â• NumPy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">ğŸ™‹ FAQ</a></li>
<li class="toctree-l1"><a class="reference external" href="https://stanbaek.github.io/NoPointer.html">No Pointers in Python?</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Labs</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="Lab1_Linux.html">ğŸ”¬ Lab1: Linux</a></li>
<li class="toctree-l1"><a class="reference internal" href="Lab2_ROS.html">ğŸ”¬ Lab2: ROS</a></li>
<li class="toctree-l1"><a class="reference internal" href="Lab3_Python.html">ğŸ”¬ Lab3: Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="Lab4_Gamepad.html">ğŸ”¬ Lab4: Gamepad</a></li>
<li class="toctree-l1"><a class="reference internal" href="Lab5_TurtleBot.html">ğŸ”¬ Lab5: Driving the Robot</a></li>
<li class="toctree-l1"><a class="reference internal" href="Lab6_IMU.html">ğŸ”¬ Lab6: IMU-Based Navigation</a></li>
<li class="toctree-l1"><a class="reference internal" href="Lab7_TF.html">ğŸ”¬ Lab7: Transformation</a></li>
<li class="toctree-l1"><a class="reference internal" href="Lab8_LIDAR.html">ğŸ”¬ Lab 8: LiDAR</a></li>
<li class="toctree-l1"><a class="reference internal" href="Lab9_SLAM.html">ğŸ”¬ Lab9: SLAM</a></li>
<li class="toctree-l1"><a class="reference internal" href="Lab10_CV.html">ğŸ”¬ Lab10: CV</a></li>
<li class="toctree-l1"><a class="reference internal" href="Lab11_AprilTag.html">ğŸ”¬ Lab11: AprilTag</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">ğŸš€ Final Project</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Appendix</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../Appendix/RobotSetup.html">ğŸ”§ Robot Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Appendix/MasterSetup.html">ğŸ”§ Master Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Appendix/GitSetup.html">ğŸ”§ Git Repo Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Appendix/GamepadSetup.html">ğŸ”§ Gamepad Setup</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/stanbaek/ece387" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/stanbaek/ece387/issues/new?title=Issue%20on%20page%20%2FLabs/FinalProject.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/Labs/FinalProject.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button>


<button class="btn btn-sm pst-navbar-icon search-button search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
</button>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>ğŸš€ Final Project</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#not-ready-yet">NOT READY YET</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#objectives">ğŸ“Œ Objectives</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#overview">ğŸ“œ Overview</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#final-project-gamesmanship">ğŸ® Final Project Gamesmanship</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#requirements">ğŸ› ï¸ Requirements</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#timeline">Timeline</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#demonstrations">ğŸ¬ Demonstrations</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#procedures">ğŸ› ï¸ Procedures</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#part-1-calibrate-the-usb-camera">âœ… Part 1: Calibrate the USB Camera</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#part-2-apriltag-detection-with-ros2">âœ… Part 2: AprilTag Detection with ROS2</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#deliverables">ğŸšš Deliverables</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="final-project">
<h1>ğŸš€ Final Project<a class="headerlink" href="#final-project" title="Link to this heading">#</a></h1>
<section id="not-ready-yet">
<h2>NOT READY YET<a class="headerlink" href="#not-ready-yet" title="Link to this heading">#</a></h2>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>Read this page thoroughly before you start working on this final project.</p>
</div>
</section>
<section id="objectives">
<h2>ğŸ“Œ Objectives<a class="headerlink" href="#objectives" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p>Students will integrate concepts from earlier modules to design and implement a complete robotic system capable of handling complex tasks using ROS2.</p></li>
<li><p>Students will demonstrate proficiency in robotic systems by building task-specific machines with onboard computing.</p></li>
<li><p>Students will apply knowledge from across the course to develop, test, and deliver a functional final project.</p></li>
</ul>
</section>
<section id="overview">
<h2>ğŸ“œ Overview<a class="headerlink" href="#overview" title="Link to this heading">#</a></h2>
<p>The final project brings together everything youâ€™ve learned throughout the course. It challenges you to design and build a complete robotic system using ROS2 that can solve a real-world task with multiple components working together. This project emphasizes embedded, task-specific robotics and is where you apply your accumulated knowledge in a hands-on, functional way.</p>
<p>Your robot will operate in the maze in the lab, using a combination of technologies from previous modules. LIDAR will help it stay centered between walls, the IMU will handle precise turns (90Â°, 180Â°, 360Â°), and OpenCV will detect and respond to randomly placed stop signs. Additionally, youâ€™ll use AprilTags to guide the robot through the maze â€”navigating based on tag ID and distance to determine whether it should turn left, right, around, or stop at its goal.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>If you notice any discrepancies in the project description or grading criteria, the correct information will follow this order of priority: (1) Instructor messages via Teams, (2) this Course Web, (3) Gradescope, and (4) the project overview slides. The Course Web will always be updated immediately to reflect any changes, and outdated instructions will be clearly crossed out.</p>
</div>
</section>
<section id="final-project-gamesmanship">
<h2>ğŸ® Final Project Gamesmanship<a class="headerlink" href="#final-project-gamesmanship" title="Link to this heading">#</a></h2>
<ol class="arabic simple">
<li><p>Demo and coding</p>
<ul class="simple">
<li><p>Read the presentation and final report requirements before you start coding.</p></li>
<li><p>Start early to earn early-bird bonus points; delay may jeopardize timely completion.</p></li>
<li><p>Use the code from Labs 10 and 11 as foundations, but avoid implementing your final project in these lab files. Instructors will review the code inside the <code class="docutils literal notranslate"><span class="pre">final_project</span></code> folder.</p></li>
<li><p>Employ <code class="docutils literal notranslate"><span class="pre">rqt</span></code>, <code class="docutils literal notranslate"><span class="pre">ros2</span> <span class="pre">topic</span></code>, and <code class="docutils literal notranslate"><span class="pre">rviz</span></code> extensively for debugging high-level behaviors.</p></li>
<li><p><strong>Cease work for the final report</strong></p>
<ul>
<li><p>Your analysis in the report is much more important than completing the maze.</p></li>
<li><p>Balance time spent on coding and demo; donâ€™t sacrifice report quality for demos. Donâ€™t lose 30 points on the report to earn 15 demo points.</p></li>
<li><p>If your robot reaches only halfway to the Level 1 goal point, the deduction will be approximately 5-10 points.</p></li>
</ul>
</li>
</ul>
</li>
<li><p>Presentation</p>
<ul class="simple">
<li><p>Utilize visual aids a lot! Figures, tables, and graphs are more helpful than words.</p></li>
<li><p>Ensure you <strong>discuss everything</strong> in the presentation section.</p></li>
<li><p>Adhere to the 6-minute time limit; practice for effective delivery. Your talk will be stopped at the 7-minute mark, and credit will not be given for parts not discussed. Adhering to the time limit for presentations is a basic etiquette. Even at professional conferences, talks can be cut short if they exceed the allotted time.</p></li>
<li><p>You are strongly recommended to practice your talk. Students who gave very short presentations to avoid exceeding the time limit often did not discuss enough details and lost even more points. So, practice! Even experienced engineers practice for their conference presentations.</p></li>
</ul>
</li>
<li><p>Report</p>
<ul class="simple">
<li><p>Thoroughly Read the template and <strong>do not miss anything in the template</strong>.</p></li>
<li><p>Use figures and tables to support your analysis and results.</p></li>
<li><p>While in-person demos are accepted, ensure submission of video demos aligned with the plots in your report.</p></li>
</ul>
</li>
</ol>
</section>
<section id="requirements">
<h2>ğŸ› ï¸ Requirements<a class="headerlink" href="#requirements" title="Link to this heading">#</a></h2>
<section id="timeline">
<h3>Timeline<a class="headerlink" href="#timeline" title="Link to this heading">#</a></h3>
<ol class="arabic simple">
<li><p>L36 0700: Design Presentation slides (Gradescope and Instructors)</p>
<ul class="simple">
<li><p>Submit your <code class="docutils literal notranslate"><span class="pre">MS</span> <span class="pre">PowerPoint</span> <span class="pre">pptx</span></code> file to your instructor NLT L36 0700. Your slides will be played on your instructorâ€™s PC for smooth transitions between speakers. Make sure to send a pptx file and not a Keynote file or Google Slides unless your instructor has approved it.</p></li>
<li><p>Additionally, submit the PDF version of your presentation file on Gradescope no later than L36 0700.</p></li>
<li><p><strong><em>No grace days</em></strong> can be used for the PowerPoint slides.</p></li>
</ul>
</li>
<li><p>L36: Design Presentations</p></li>
<li><p>L39 0700: Live demo Due</p>
<ul class="simple">
<li><p>Late Demos: You can use grace days, but all products must be submitted NLT T40 2359 (by the Deanâ€™s policy).</p></li>
</ul>
</li>
<li><p>T40 2359: Final report &amp; Code</p>
<ul class="simple">
<li><p>No grace days can be used. All products must be submitted by midnight on T40.</p></li>
</ul>
</li>
</ol>
</section>
<section id="demonstrations">
<h3>ğŸ¬ Demonstrations<a class="headerlink" href="#demonstrations" title="Link to this heading">#</a></h3>
<p>Demonstrations will be accomplished on lesson 39 in the maze. Points will be deducted for failed checkpoints (e.g., does not stop and turn within approximately 2 meters of AprilTag 0). The final rubric is below and each item is worth <strong>6 points</strong> for a total of <strong>40 points</strong> assigned to the demonstration:</p>
<ul class="simple">
<li><p>Wall following</p></li>
<li><p>Ignore windows</p></li>
<li><p>Stop sign: Stop within 0.3 meters from a stop sign, wait until the stop sign is removed.</p></li>
<li><p>AprilTag ID 0: Stop within 0.27 meters from the AprilTag and then turn left.</p></li>
<li><p>AprilTag ID 1: Stop within 0.27 meters from the AprilTag and then turn right.</p></li>
<li><p>AprilTag ID 2: Stop within 0.27 meters from the AprilTag, and then make a 270<span class="math notranslate nohighlight">\(^\circ\)</span> left turn..</p></li>
</ul>
</section>
</section>
<section id="procedures">
<h2>ğŸ› ï¸ Procedures<a class="headerlink" href="#procedures" title="Link to this heading">#</a></h2>
<section id="part-1-calibrate-the-usb-camera">
<h3>âœ… Part 1: Calibrate the USB Camera<a class="headerlink" href="#part-1-calibrate-the-usb-camera" title="Link to this heading">#</a></h3>
<p>For a camera to effectively perform computer vision tasks, it must first be calibrated. Without calibration, thereâ€™s no reliable reference for determining the size of objects within the cameraâ€™s frame. The <a class="reference external" href="http://wiki.ros.org/camera_calibration">ROS Calibration Tool</a> generates a calibration file that other ROS packages can use to calculate object size and distance. The <strong>camera_calibration</strong> package leverages OpenCVâ€™s calibration techniques to simplify the process of calibrating monocular or stereo cameras, typically using a checkerboard pattern as the target. For detailed instructions, refer to the <a class="reference external" href="http://wiki.ros.org/camera_calibration/Tutorials/MonocularCalibration">Camera Calibration Tutorial</a>.</p>
<ol class="arabic">
<li><p>Disconnect the camera from the robot and plug it into the <strong>Master computer</strong>. Then run:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ros2<span class="w"> </span>run<span class="w"> </span>usb_cam<span class="w"> </span>usb_cam_node_exe<span class="w"> </span>--ros-args<span class="w"> </span>-p<span class="w"> </span>video_device:<span class="o">=</span>/dev/video0
</pre></div>
</div>
</li>
<li><p>Check if topics are being published:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ros2<span class="w"> </span>topic<span class="w"> </span>list
</pre></div>
</div>
<p>Make sure you see <code class="docutils literal notranslate"><span class="pre">/image_raw</span></code> and <code class="docutils literal notranslate"><span class="pre">/camera_info</span></code>. Then check the message type:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ros2<span class="w"> </span>topic<span class="w"> </span><span class="nb">type</span><span class="w"> </span>/camera_info
ros2<span class="w"> </span>interface<span class="w"> </span>show<span class="w"> </span>&lt;message&gt;
</pre></div>
</div>
</li>
<li><p>Echo the camera info:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ros2<span class="w"> </span>topic<span class="w"> </span><span class="nb">echo</span><span class="w"> </span>/camera_info
</pre></div>
</div>
<p>Look for values under <code class="docutils literal notranslate"><span class="pre">K</span></code>, <code class="docutils literal notranslate"><span class="pre">R</span></code>, and <code class="docutils literal notranslate"><span class="pre">P</span></code>. Initially, theyâ€™ll be all zerosâ€”this means the camera is not yet calibrated.</p>
<blockquote>
<div><p>ğŸ’¡ You should be comfortable using these ROS2 commands. Expect to answer related questions during graded reviews (GRs).</p>
</div></blockquote>
</li>
<li><p>Run the calibration tool. Use the checkerboard (9x6 internal corners, 2.5 cm spacing). Run:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ros2<span class="w"> </span>run<span class="w"> </span>camera_calibration<span class="w"> </span>cameracalibrator<span class="w"> </span>--size<span class="w"> </span>9x6<span class="w"> </span>--square<span class="w"> </span><span class="m">0</span>.025<span class="w"> </span>--camera_name<span class="w"> </span>default_cam<span class="w"> </span>--no-service-check<span class="w"> </span>--ros-args<span class="w"> </span>-r<span class="w"> </span>image:<span class="o">=</span>/image_raw
</pre></div>
</div>
<p>This launches a calibration window.</p>
<a class="reference internal image-reference" href="../_images/Lab11_Calibration.png"><img alt="../_images/Lab11_Calibration.png" class="align-center" src="../_images/Lab11_Calibration.png" style="width: 500px;" /></a>
</li>
<li><p>To collect calibration data, move the checkerboard in the camera view in various ways:</p>
<ul class="simple">
<li><p>Left/right/top/bottom</p></li>
<li><p>Closer/farther</p></li>
<li><p>Tilted at angles</p></li>
<li><p>Fill the entire frame</p></li>
</ul>
<p>Four progress bars will fill up. When the â€œCALIBRATEâ€ button activates, click it.</p>
<a class="reference internal image-reference" href="../_images/Lab11_Calibrate.png"><img alt="../_images/Lab11_Calibrate.png" class="align-center" src="../_images/Lab11_Calibrate.png" style="width: 500px;" /></a>
<blockquote>
<div><p>ğŸ•“ Calibration may take a few minutes. The windows might be greyed out but just wait, it is working.</p>
</div></blockquote>
<p>When complete, it will display something similar to the following output:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>****<span class="w"> </span>Calibrating<span class="w"> </span>****
mono<span class="w"> </span>pinhole<span class="w"> </span>calibration...
<span class="nv">D</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span>-0.027598200869062808,<span class="w"> </span>-0.0273210932029884,<span class="w"> </span><span class="m">0</span>.002259050714452529,<span class="w"> </span><span class="m">0</span>.004238057516107571,<span class="w"> </span><span class="m">0</span>.0<span class="o">]</span>
<span class="nv">K</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="m">517</span>.6781776101559,<span class="w"> </span><span class="m">0</span>.0,<span class="w"> </span><span class="m">330</span>.5433124974498,<span class="w"> </span><span class="m">0</span>.0,<span class="w"> </span><span class="m">522</span>.269778659698,<span class="w"> </span><span class="m">247</span>.60730067305022,<span class="w"> </span><span class="m">0</span>.0,<span class="w"> </span><span class="m">0</span>.0,<span class="w"> </span><span class="m">1</span>.0<span class="o">]</span>
<span class="nv">R</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="m">1</span>.0,<span class="w"> </span><span class="m">0</span>.0,<span class="w"> </span><span class="m">0</span>.0,<span class="w"> </span><span class="m">0</span>.0,<span class="w"> </span><span class="m">1</span>.0,<span class="w"> </span><span class="m">0</span>.0,<span class="w"> </span><span class="m">0</span>.0,<span class="w"> </span><span class="m">0</span>.0,<span class="w"> </span><span class="m">1</span>.0<span class="o">]</span>
<span class="nv">P</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="m">508</span>.604248046875,<span class="w"> </span><span class="m">0</span>.0,<span class="w"> </span><span class="m">333</span>.1752989083179,<span class="w"> </span><span class="m">0</span>.0,<span class="w"> </span><span class="m">0</span>.0,<span class="w"> </span><span class="m">517</span>.5308227539062,<span class="w"> </span><span class="m">248</span>.01611962861898,<span class="w"> </span><span class="m">0</span>.0,<span class="w"> </span><span class="m">0</span>.0,<span class="w"> </span><span class="m">0</span>.0,<span class="w"> </span><span class="m">1</span>.0,<span class="w"> </span><span class="m">0</span>.0<span class="o">]</span>
None
<span class="c1"># oST version 5.0 parameters</span>


<span class="o">[</span>image<span class="o">]</span>

width
<span class="m">640</span>

height
<span class="m">480</span>

<span class="o">[</span>default_cam<span class="o">]</span>

camera<span class="w"> </span>matrix
<span class="m">517</span>.678178<span class="w"> </span><span class="m">0</span>.000000<span class="w"> </span><span class="m">330</span>.543312
<span class="m">0</span>.000000<span class="w"> </span><span class="m">522</span>.269779<span class="w"> </span><span class="m">247</span>.607301
<span class="m">0</span>.000000<span class="w"> </span><span class="m">0</span>.000000<span class="w"> </span><span class="m">1</span>.000000

distortion
-0.027598<span class="w"> </span>-0.027321<span class="w"> </span><span class="m">0</span>.002259<span class="w"> </span><span class="m">0</span>.004238<span class="w"> </span><span class="m">0</span>.000000

rectification
<span class="m">1</span>.000000<span class="w"> </span><span class="m">0</span>.000000<span class="w"> </span><span class="m">0</span>.000000
<span class="m">0</span>.000000<span class="w"> </span><span class="m">1</span>.000000<span class="w"> </span><span class="m">0</span>.000000
<span class="m">0</span>.000000<span class="w"> </span><span class="m">0</span>.000000<span class="w"> </span><span class="m">1</span>.000000

projection
<span class="m">508</span>.604248<span class="w"> </span><span class="m">0</span>.000000<span class="w"> </span><span class="m">333</span>.175299<span class="w"> </span><span class="m">0</span>.000000
<span class="m">0</span>.000000<span class="w"> </span><span class="m">517</span>.530823<span class="w"> </span><span class="m">248</span>.016120<span class="w"> </span><span class="m">0</span>.000000
<span class="m">0</span>.000000<span class="w"> </span><span class="m">0</span>.000000<span class="w"> </span><span class="m">1</span>.000000<span class="w"> </span><span class="m">0</span>.000000
</pre></div>
</div>
</li>
<li><p>Save and extract calibration data. Click <strong>Save</strong>, then <strong>Commit</strong>. Browse to the location of the calibration data and extract</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>/tmp
tar<span class="w"> </span>xf<span class="w"> </span>calibrationdata.tar.gz
</pre></div>
</div>
<p>Move the <code class="docutils literal notranslate"><span class="pre">ost.yaml</span></code> file to the correct ROS folder:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>~/.ros
mkdir<span class="w"> </span>camera_info
mv<span class="w"> </span>/tmp/ost.yaml<span class="w"> </span>./camera_info/default_cam.yaml
</pre></div>
</div>
</li>
<li><p>Relaunch the camera node:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ros2<span class="w"> </span>run<span class="w"> </span>usb_cam<span class="w"> </span>usb_cam_node_exe<span class="w"> </span>--ros-args<span class="w"> </span>-p<span class="w"> </span>video_device:<span class="o">=</span>/dev/video0
</pre></div>
</div>
</li>
<li><p>Take another look at the <code class="docutils literal notranslate"><span class="pre">camera_info</span></code> topic. Do you notice any differences compared to the message published by the <code class="docutils literal notranslate"><span class="pre">usb_cam</span></code> node when calibration data is not included? Keep in mind that the <code class="docutils literal notranslate"><span class="pre">usb_cam</span></code> node does not use the <code class="docutils literal notranslate"><span class="pre">CameraInfo</span></code> message to produce rectified images from the raw data (<code class="docutils literal notranslate"><span class="pre">\image_raw</span></code>). Instead, it publishes the <code class="docutils literal notranslate"><span class="pre">CameraInfo</span></code> message so that you can use it to create rectified images if needed.</p></li>
<li><p>Take a screenshot of the calibrated <code class="docutils literal notranslate"><span class="pre">camera_info</span></code> output. This is one of your deliverables.</p></li>
</ol>
</section>
<hr class="docutils" />
<section id="part-2-apriltag-detection-with-ros2">
<h3>âœ… Part 2: AprilTag Detection with ROS2<a class="headerlink" href="#part-2-apriltag-detection-with-ros2" title="Link to this heading">#</a></h3>
<p>In this section, you will explore how to detect AprilTags in ROS 2. There are several methods to achieve this, one of which involves using multiple existing ROS nodes and connecting them via ROS topics. While this approach may seem straightforward, managing the interactions between different nodes can become complex and inefficient. To simplify this process, we will develop our own custom node to handle all the required functionality.</p>
<ol class="arabic simple">
<li><p>Create a package named <code class="docutils literal notranslate"><span class="pre">lab11_apriltag</span></code> with the dependencies:</p></li>
</ol>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">rclpy</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cv_bridge</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sensor_msgs</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">std_msgs</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">opencv2</span></code></p></li>
</ul>
<ol class="arabic">
<li><p>Download the provided <a class="reference download internal" download="" href="../_downloads/8f80d7f13c4a3d59f0288737b0c97faf/apriltag.py"><span class="xref download myst"><code class="docutils literal notranslate"><span class="pre">apriltag.py</span></code></span></a> and place it in your packageâ€™s scripts directory.</p></li>
<li><p>Update your <code class="docutils literal notranslate"><span class="pre">setup.py</span></code> to include the script as an entry point. This is necessary to ensure that the script runs as a node.</p></li>
<li><p>Inside your package (not the scripts folder), create a new directory called <code class="docutils literal notranslate"><span class="pre">config</span></code>. Next, copy the <code class="docutils literal notranslate"><span class="pre">default_cam.yaml</span></code> file into this directory. The code in <code class="docutils literal notranslate"><span class="pre">apriltag.py</span></code> is already set up to load this default calibration file if no calibration file path is provided by the user when the node is executed. Your directory structure should look like this:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>lab11_apriltag/
â”œâ”€â”€<span class="w"> </span>config/
â”‚<span class="w">   </span>â””â”€â”€<span class="w"> </span>default_camera_info.yaml
â”œâ”€â”€<span class="w"> </span>lab11_apriltag/
â”œâ”€â”€<span class="w"> </span>resources/
â””â”€â”€<span class="w"> </span>...
</pre></div>
</div>
</li>
<li><p>Add this path to your <code class="docutils literal notranslate"><span class="pre">setup.py</span></code> under <code class="docutils literal notranslate"><span class="pre">data_files</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">data_files</span><span class="o">=</span><span class="p">[</span>
    <span class="p">(</span><span class="s1">&#39;share/&#39;</span> <span class="o">+</span> <span class="n">package_name</span> <span class="o">+</span> <span class="s1">&#39;/config&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;config/default_camera_info.yaml&#39;</span><span class="p">]),</span>
    <span class="o">...</span>
<span class="p">]</span>
</pre></div>
</div>
<p>And in <code class="docutils literal notranslate"><span class="pre">package.xml</span></code>, include:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;buildtool_depend&gt;</span>ament_cmake<span class="nt">&lt;/buildtool_depend&gt;</span>
<span class="nt">&lt;exec_depend&gt;</span>ament_index_python<span class="nt">&lt;/exec_depend&gt;</span>
</pre></div>
</div>
</li>
<li><p>Open the <code class="docutils literal notranslate"><span class="pre">apriltag.py</span></code> script and examine the constructor to understand how it handles loading files via command line arguments. If no argument is provided, it defaults to a pre-configured file. Pay close attention to the <code class="docutils literal notranslate"><span class="pre">load_camera_info</span></code> methodâ€”it demonstrates how to extract data from a <code class="docutils literal notranslate"><span class="pre">yaml</span></code> file effectively. While the same functionality could be achieved by subscribing to the <code class="docutils literal notranslate"><span class="pre">camera_info</span></code> topic published by the <code class="docutils literal notranslate"><span class="pre">usb_cam</span></code> node, using a calibration file is more efficient since the <code class="docutils literal notranslate"><span class="pre">camera_info</span></code> topic repeatedly publishes identical data over time.</p></li>
<li><p>Launch the <code class="docutils literal notranslate"><span class="pre">usb_cam</span></code> node with a frame rate set to <strong>15 Hz</strong>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ros2<span class="w"> </span>run<span class="w"> </span>usb_cam<span class="w"> </span>usb_cam_node_exe<span class="w"> </span>--ros-args<span class="w"> </span>-p<span class="w"> </span>video_device:<span class="o">=</span>/dev/video0<span class="w"> </span>-p<span class="w"> </span>framerate:<span class="o">=</span><span class="m">15</span>.0
</pre></div>
</div>
</li>
<li><p>Start the <code class="docutils literal notranslate"><span class="pre">apriltag_ros</span></code> node to detect AprilTags.</p></li>
<li><p>Open another terminal and echo the topic <code class="docutils literal notranslate"><span class="pre">/apriltag_pose</span></code> on the master. Observe the output. Does the <code class="docutils literal notranslate"><span class="pre">apriltag_ros</span></code> node detect more than one tag simultaneously? Consider which value might be used to calculate the distance to a tag, and note the type of message being published. Identify the package this message originates from.</p></li>
<li><p>Demonstrate to the instructor that the <strong>apriltag_ros</strong> node is successfully detecting tags and publishing their position data.</p></li>
</ol>
<p>With a properly calibrated camera, you are now equipped to identify AprilTags along with their size, orientation, and distance.</p>
</section>
</section>
<section id="deliverables">
<h2>ğŸšš Deliverables<a class="headerlink" href="#deliverables" title="Link to this heading">#</a></h2>
<ol class="arabic simple">
<li><p><strong>[20 Points] Complete the <code class="docutils literal notranslate"><span class="pre">apriltag.py</span></code> Script</strong></p>
<ul class="simple">
<li><p>Ensure the script is fully functional and implements all required features.</p></li>
<li><p>Push your code to GitHub and confirm that it has been successfully uploaded.
<strong>NOTE:</strong> <em>If the instructor canâ€™t find your code in your repository, you will receive a grade of 0 for the coding part.</em></p></li>
</ul>
</li>
<li><p><strong>[10 Points] Submit Screenshots</strong></p>
<ul class="simple">
<li><p>Submit a screenshot of the <code class="docutils literal notranslate"><span class="pre">camera_info</span></code> topic.</p></li>
</ul>
</li>
<li><p><strong>[20 Points] Demonstration</strong></p>
<ul class="simple">
<li><p>Demonstrate the <code class="docutils literal notranslate"><span class="pre">apriltag_ros</span></code> node printing the ID and distance of each April Tag.</p></li>
<li><p>Demonstrate the <code class="docutils literal notranslate"><span class="pre">apriltag_ros</span></code> node publishes the <code class="docutils literal notranslate"><span class="pre">apriltag_pose</span></code> topic.</p></li>
</ul>
</li>
</ol>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./Labs"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="Lab11_AprilTag.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">ğŸ”¬ Lab11: AprilTag</p>
      </div>
    </a>
    <a class="right-next"
       href="../Appendix/RobotSetup.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">ğŸ”§ Robot Setup</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#not-ready-yet">NOT READY YET</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#objectives">ğŸ“Œ Objectives</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#overview">ğŸ“œ Overview</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#final-project-gamesmanship">ğŸ® Final Project Gamesmanship</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#requirements">ğŸ› ï¸ Requirements</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#timeline">Timeline</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#demonstrations">ğŸ¬ Demonstrations</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#procedures">ğŸ› ï¸ Procedures</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#part-1-calibrate-the-usb-camera">âœ… Part 1: Calibrate the USB Camera</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#part-2-apriltag-detection-with-ros2">âœ… Part 2: AprilTag Detection with ROS2</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#deliverables">ğŸšš Deliverables</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Stan Baek
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      Â© Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>